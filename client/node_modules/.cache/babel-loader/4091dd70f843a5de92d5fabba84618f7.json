{"ast":null,"code":"var _jsxFileName = \"/home/user/Navigation-and-api-integration/client/src/components/profile.component.js\";\nimport React from 'react';\nimport { profileActions } from '../redux/profile/profileActions';\nimport Input from './generalComponents/input.component';\nimport Button from './generalComponents/button.component';\nimport male from '../images/male.jpg';\nimport female from '../images/female.png';\nimport Label from './generalComponents/label';\nimport Textarea from './generalComponents/textarea';\n\nclass Profile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleUserInput = event => {\n      const name = event.target.name;\n      const value = event.target.value;\n      this.setState({\n        [name]: value\n      }, () => {\n        this.validateField(name, value);\n      });\n\n      if (name === 'photo') {\n        this.setState({\n          file: event.target.files[0]\n        });\n      }\n    };\n\n    this.sendMail = event => {\n      event.preventDefault();\n      const _this$state = this.state,\n            subject = _this$state.subject,\n            message = _this$state.message;\n      const _this$state$userData = this.state.userData,\n            name = _this$state$userData.name,\n            emailId = _this$state$userData.emailId;\n      const dispatch = this.props.dispatch;\n      dispatch(profileActions.sendMail(name, emailId, subject, message));\n      document.getElementById('contactForm').style.display = 'none';\n      this.setState({\n        subject: '',\n        message: ''\n      });\n    };\n\n    this.submitDetails = event => {\n      event.preventDefault();\n      const dispatch = this.props.dispatch;\n      const id = this.state.userData._id;\n      const emailId = this.state.userData.emailId;\n      const data = new FormData();\n      data.append('filename', this.state.userData.emailId);\n      data.append('file', this.state.file);\n      dispatch(profileActions.updateProfile(id, data, emailId));\n      document.getElementById('photoupdate').reset();\n      document.getElementById('updateDetails').style.display = 'none';\n    };\n\n    this.mailForm = event => {\n      event.preventDefault();\n      const tempFlag = !this.mailFlag;\n\n      if (tempFlag) {\n        document.getElementById('contactForm').style.display = 'block';\n        this.mailFlag = true;\n      } else {\n        this.mailFlag = false;\n        document.getElementById('contactForm').style.display = 'none';\n      }\n    };\n\n    this.updateDetails = event => {\n      event.preventDefault();\n      const tempFlag = !this.updateFlag;\n\n      if (tempFlag) {\n        document.getElementById('updateDetails').style.display = 'block';\n        this.updateFlag = true;\n      } else {\n        this.updateFlag = false;\n        document.getElementById('updateDetails').style.display = 'none';\n      }\n    };\n\n    this.state = {\n      file: [],\n      subject: '',\n      message: '',\n      photo: '',\n      formErrors: {\n        photo: '',\n        fullname: '',\n        email: '',\n        subject: '',\n        message: ''\n      },\n      profileValid: false,\n      photoValid: false\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    const user = props.user,\n          profile = props.profile;\n    this.setState({\n      userData: user,\n      profile: profile,\n      imageHash: Date.now()\n    });\n  }\n\n  componentWillMount() {\n    const _this$props = this.props,\n          user = _this$props.user,\n          profile = _this$props.profile;\n    this.setState({\n      userData: user,\n      profile: profile\n    });\n  }\n\n  validateField(fieldName, value) {\n    let fieldValidationErrors = this.state.formErrors;\n    let photoValid = this.state.photoValid;\n\n    switch (fieldName) {\n      case 'photo':\n        if (value.match(/\\.[0-9a-z]+$/i)[0] === '.jpg' || value.match(/\\.[0-9a-z]+$/i)[0] === '.JPG') {\n          photoValid = true;\n          fieldValidationErrors.photo = photoValid ? '' : ' is invalid';\n        } else if (value.match(/\\.[0-9a-z]+$/i)[0] === '.png' || value.match(/\\.[0-9a-z]+$/i)[0] === '.PNG') {\n          photoValid = true;\n          fieldValidationErrors.photo = photoValid ? '' : ' is invalid';\n        } else if (value.match(/\\.[0-9a-z]+$/i)[0] === '.svg' || value.match(/\\.[0-9a-z]+$/i)[0] === '.SVG') {\n          photoValid = true;\n          fieldValidationErrors.photo = photoValid ? '' : ' is invalid';\n        } else {\n          photoValid = null;\n          fieldValidationErrors.photo = photoValid ? '' : ' is invalid';\n        }\n\n        break;\n\n      case 'fullname':\n        document.getElementById('fullname').onkeydown = onkeyup = onkeypress = () => {\n          fieldValidationErrors.fullname = false ? '' : 'read only';\n        };\n\n        break;\n\n      case 'email':\n        document.getElementById('email').onkeydown = onkeyup = onkeypress = () => {\n          fieldValidationErrors.email = false ? '' : 'read only';\n        };\n\n        break;\n\n      default:\n        break;\n    }\n\n    this.setState({\n      formErrors: fieldValidationErrors,\n      photoValid: photoValid\n    }, this.validateForm);\n  }\n\n  validateForm() {\n    this.setState({\n      profileValid: this.state.photoValid\n    });\n  }\n\n  errorClass(error) {\n    return error.length === 0 ? '' : 'has-error';\n  }\n\n  render() {\n    let imageUrl = '';\n\n    try {\n      if (this.state.profile) {\n        imageUrl = 'http://localhost:4000'.concat(this.state.profile.image);\n      } else {\n        imageUrl = 'http://localhost:4000'.concat(this.state.userData.image);\n      }\n    } catch (error) {\n      console.log(error.message);\n    }\n\n    return React.createElement(\"div\", {\n      className: \"panel panel-primary profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"panel-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"User information\")), React.createElement(\"div\", {\n      className: \"panel-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-3 col-lg-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, !this.state.userData.image && this.state.userData.gender === 'Male' && React.createElement(\"img\", {\n      className: \"img-circle\",\n      src: male,\n      alt: \"Upload Pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), !this.state.userData.image && this.state.userData.gender === 'Female' && React.createElement(\"img\", {\n      className: \"img-circle\",\n      src: female,\n      alt: \"Upload Pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), this.state.userData.image && React.createElement(\"img\", {\n      key: new Date(),\n      className: \"img-circle\",\n      src: \"\".concat(imageUrl, \"?\").concat(this.state.imageHash),\n      alt: \"Upload Pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-9 col-lg-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, this.state.userData.name, \" \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"dl\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"dt\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"UID:\"), React.createElement(\"dd\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, this.state.userData._id)), React.createElement(\"dl\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"dt\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Fullname:\"), React.createElement(\"dd\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, this.state.userData.name)), React.createElement(\"dl\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"dt\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Email:\"), React.createElement(\"dd\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, this.state.userData.emailId)), React.createElement(\"dl\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"dt\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"Mobile No.:\"), React.createElement(\"dd\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, this.state.userData.phone)))))), React.createElement(\"div\", {\n      className: \"panel-body update\",\n      id: \"updateDetails\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.submitDetails,\n      className: \"form-horizontal\",\n      id: \"photoupdate\",\n      method: \"post\",\n      encType: \"multipart/form-data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      className: \"panel-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"Update Details!\"), React.createElement(\"div\", {\n      className: \"panel-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(Label, {\n      htmlFor: 'photo',\n      title: 'Profile Photo',\n      className: 'col-form-label col-sm-3',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-sm-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(Input, {\n      className: 'form-control',\n      input_type: 'file',\n      onChange: this.handleUserInput,\n      name: 'photo',\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }), this.errorClass(this.state.formErrors.photo) && React.createElement(\"span\", {\n      className: \"phoneright formErrors\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"Photo not valid only .jpg and .png\"))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: 'submit',\n      className: 'btn btn-primary button',\n      disabled: this.state.profileValid,\n      title: 'Update',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    })))))), React.createElement(\"div\", {\n      className: \"panel-body update\",\n      id: \"contactForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      id: \"contact-form\",\n      onSubmit: this.sendMail,\n      method: \"POST\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(Label, {\n      htmlFor: \"fullname\",\n      title: 'Fullname',\n      className: 'col-form-label col-sm-2',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(Input, {\n      input_type: 'text',\n      value: this.state.userData.name,\n      onChange: this.handleUserInput,\n      readOnly: true,\n      name: 'fullname',\n      className: \"form-control\",\n      id: \"fullname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), this.errorClass(this.state.formErrors.fullname) && React.createElement(\"span\", {\n      className: \"phoneright formErrors\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, \"Read Only Field!\"))), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(Label, {\n      htmlFor: \"email\",\n      title: 'Email',\n      className: 'col-form-label col-sm-2',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(Input, {\n      input_type: 'text',\n      value: this.state.userData.emailId,\n      onChange: this.handleUserInput,\n      readOnly: true,\n      name: 'email',\n      className: \"form-control\",\n      id: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }), this.errorClass(this.state.formErrors.email) && React.createElement(\"span\", {\n      className: \"phoneright formErrors\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, \"Read Only Field!\"))), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(Label, {\n      htmlFor: \"subject\",\n      title: 'Subject',\n      className: 'col-form-label col-sm-2',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, React.createElement(Input, {\n      input_type: 'text',\n      value: this.state.subject,\n      onChange: this.handleUserInput,\n      readOnly: true,\n      name: 'subject',\n      className: \"form-control\",\n      id: \"subject\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, React.createElement(Label, {\n      htmlFor: 'message',\n      title: 'Message',\n      className: 'col-sm-2 col-form-label',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, React.createElement(Textarea, {\n      className: \"form-control\",\n      rows: \"5\",\n      onChange: this.handleUserInput,\n      value: this.state.message,\n      id: \"message\",\n      name: \"message\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: 'submit',\n      className: 'btn btn-primary button',\n      title: 'Send Mail',\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }))))), React.createElement(\"div\", {\n      className: \"panel-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.mailForm,\n      className: \"btn btn-sm btn-primary\",\n      type: \"button\",\n      \"data-toggle\": \"tooltip\",\n      \"data-original-title\": \"Send message to user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-envelope\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      className: \"pull-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.updateDetails,\n      className: \"btn btn-sm btn-warning\",\n      type: \"button\",\n      \"data-toggle\": \"tooltip\",\n      \"data-original-title\": \"Edit this user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"space btn btn-sm btn-danger\",\n      type: \"button\",\n      \"data-toggle\": \"tooltip\",\n      \"data-original-title\": \"Remove this user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-remove\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["/home/user/Navigation-and-api-integration/client/src/components/profile.component.js"],"names":["React","profileActions","Input","Button","male","female","Label","Textarea","Profile","Component","constructor","props","handleUserInput","event","name","target","value","setState","validateField","file","files","sendMail","preventDefault","state","subject","message","userData","emailId","dispatch","document","getElementById","style","display","submitDetails","id","_id","data","FormData","append","updateProfile","reset","mailForm","tempFlag","mailFlag","updateDetails","updateFlag","photo","formErrors","fullname","email","profileValid","photoValid","componentWillReceiveProps","user","profile","imageHash","Date","now","componentWillMount","fieldName","fieldValidationErrors","match","onkeydown","onkeyup","onkeypress","validateForm","errorClass","error","length","render","imageUrl","concat","image","console","log","gender","phone"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { profileActions } from '../redux/profile/profileActions';\nimport Input from './generalComponents/input.component';\nimport Button from './generalComponents/button.component'\nimport male from '../images/male.jpg'\nimport female from '../images/female.png'\nimport Label from './generalComponents/label'\nimport Textarea from './generalComponents/textarea';\n\nclass Profile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: [],\n      subject: '',\n      message: '',\n      photo: '',\n      formErrors: { photo: '', fullname: '', email: '', subject: '', message: '' },\n      profileValid: false,\n      photoValid: false\n    }\n  }\n\n  componentWillReceiveProps(props) {\n    const { user, profile } = props;\n    this.setState({\n      userData: user,\n      profile: profile,\n      imageHash: Date.now()\n    })\n  }\n\n  componentWillMount() {\n    const { user,  profile } = this.props;\n    this.setState({\n      userData: user,\n      profile: profile\n    })\n  }\n\n  handleUserInput = (event) => {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({ [name]: value },\n      () => { this.validateField(name, value) });\n    if (name === 'photo') {\n      this.setState({\n        file: event.target.files[0]\n      })\n    }\n  }\n\n  validateField(fieldName, value) {\n    let fieldValidationErrors = this.state.formErrors;\n    let photoValid = this.state.photoValid\n\n    switch (fieldName) {\n      case 'photo':\n        if (value.match(/\\.[0-9a-z]+$/i)[0] === '.jpg' || value.match(/\\.[0-9a-z]+$/i)[0] === '.JPG') {\n          photoValid = true;\n          fieldValidationErrors.photo = photoValid ? '' : ' is invalid';\n        } else if (value.match(/\\.[0-9a-z]+$/i)[0] === '.png' || value.match(/\\.[0-9a-z]+$/i)[0] === '.PNG') {\n          photoValid = true;\n          fieldValidationErrors.photo = photoValid ? '' : ' is invalid';\n        } else if (value.match(/\\.[0-9a-z]+$/i)[0] === '.svg' || value.match(/\\.[0-9a-z]+$/i)[0] === '.SVG') {\n          photoValid = true;\n          fieldValidationErrors.photo = photoValid ? '' : ' is invalid';\n        } else {\n          photoValid = null;\n          fieldValidationErrors.photo = photoValid ? '' : ' is invalid';\n        }\n        break;\n      case 'fullname':\n        document.getElementById('fullname').onkeydown = onkeyup = onkeypress = () => {\n          fieldValidationErrors.fullname = false ? '' : 'read only';\n        }\n        break;\n      case 'email':\n        document.getElementById('email').onkeydown = onkeyup = onkeypress = () => {\n          fieldValidationErrors.email = false ? '' : 'read only';\n        }\n        break;\n      default:\n        break;\n    }\n    this.setState({\n      formErrors: fieldValidationErrors,\n      photoValid: photoValid\n    }, this.validateForm);\n  }\n\n  validateForm() {\n    this.setState({\n      profileValid: this.state.photoValid\n    });\n  }\n\n  errorClass(error) {\n    return (error.length === 0 ? '' : 'has-error');\n  }\n\n  sendMail = (event) => {\n    event.preventDefault();\n    const { subject, message } = this.state\n    const { name, emailId } = this.state.userData\n    const { dispatch } = this.props;\n    dispatch(profileActions.sendMail(name, emailId, subject, message))\n    document.getElementById('contactForm').style.display = 'none';\n    this.setState({\n      subject: '',\n      message: ''\n    })\n  }\n\n  submitDetails = (event) => {\n    event.preventDefault();\n    const { dispatch } = this.props;\n    const id = this.state.userData._id\n    const { emailId } = this.state.userData\n    const data = new FormData();\n    data.append('filename', this.state.userData.emailId)\n    data.append('file', this.state.file)\n    dispatch(profileActions.updateProfile(id, data, emailId))\n    document.getElementById('photoupdate').reset();\n    document.getElementById('updateDetails').style.display = 'none';\n\n  }\n\n  mailFlag;\n  mailForm = (event) => {\n    event.preventDefault();\n    const tempFlag = !this.mailFlag;\n    if (tempFlag) {\n      document.getElementById('contactForm').style.display = 'block';\n      this.mailFlag = true;\n    } else {\n      this.mailFlag = false;\n      document.getElementById('contactForm').style.display = 'none';\n    }\n  }\n\n  updateFlag;\n  updateDetails = (event) => {\n    event.preventDefault()\n    const tempFlag = !this.updateFlag;\n    if (tempFlag) {\n      document.getElementById('updateDetails').style.display = 'block';\n      this.updateFlag = true;\n    } else {\n      this.updateFlag = false;\n      document.getElementById('updateDetails').style.display = 'none';\n    }\n  }\n  render() {\n    let imageUrl = '';\n    try {\n      if (this.state.profile) {\n        imageUrl = 'http://localhost:4000'.concat(this.state.profile.image)\n      } else {\n        imageUrl = 'http://localhost:4000'.concat(this.state.userData.image)\n      }\n    } catch (error) {\n      console.log(error.message)\n    }\n    return (\n      <div className=\"panel panel-primary profile\">\n        <div className=\"panel-heading\">\n          <h3 className=\"panel-title\">User information</h3>\n        </div>\n        <div className=\"panel-body\">\n          <div className=\"row\">\n            <div className=\"col-md-3 col-lg-3\">\n              {\n                !this.state.userData.image && this.state.userData.gender === 'Male' && <img className=\"img-circle\" src={male} alt=\"Upload Pic\" />\n              }\n              {\n                !this.state.userData.image && this.state.userData.gender === 'Female' && <img className=\"img-circle\" src={female} alt=\"Upload Pic\" />\n              }\n              {\n                this.state.userData.image && <img key={new Date()} className=\"img-circle\" src={`${imageUrl}?${this.state.imageHash}`} alt=\"Upload Pic\" />\n              }\n            </div>\n            <div className=\"col-md-9 col-lg-9\">\n              <strong>{this.state.userData.name} </strong><br />\n              <div>\n                <dl>\n                  <dt>UID:</dt>\n                  <dd>{this.state.userData._id}</dd>\n                </dl>\n                <dl>\n                  <dt>Fullname:</dt>\n                  <dd>{this.state.userData.name}</dd>\n                </dl>\n                <dl>\n                  <dt>Email:</dt>\n                  <dd>{this.state.userData.emailId}</dd>\n                </dl>\n                <dl>\n                  <dt>Mobile No.:</dt>\n                  <dd>{this.state.userData.phone}</dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"panel-body update\" id=\"updateDetails\">\n          <form onSubmit={this.submitDetails} className=\"form-horizontal\" id=\"photoupdate\" method=\"post\" encType=\"multipart/form-data\">\n            <hr />\n            <h3 className=\"panel-title\">Update Details!</h3>\n            <div className=\"panel-body\">\n              <div className=\"form-group row\">\n                <Label\n                  htmlFor={'photo'}\n                  title={'Profile Photo'}\n                  className={'col-form-label col-sm-3'}\n                />\n                <div className=\"col-sm-9\">\n                  <Input\n                    className={'form-control'}\n                    input_type={'file'}\n                    onChange={this.handleUserInput}\n                    name={'photo'}\n                    required\n                  />\n                  {this.errorClass(this.state.formErrors.photo) && <span className=\"phoneright formErrors\">Photo not valid only .jpg and .png</span>}\n                </div>\n              </div>\n              <div className=\"form-group\">\n                <div className=\"col-sm-9\">\n                  <Button\n                    type={'submit'}\n                    className={'btn btn-primary button'}\n                    disabled={this.state.profileValid}\n                    title={'Update'}\n                  />\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n        <div className=\"panel-body update\" id=\"contactForm\">\n          <form id=\"contact-form\" onSubmit={this.sendMail} method=\"POST\">\n            <div className=\"form-group row\">\n              <Label\n                htmlFor=\"fullname\"\n                title={'Fullname'}\n                className={'col-form-label col-sm-2'}\n              />\n              <div className=\"col-sm-10\">\n                <Input\n                  input_type={'text'}\n                  value={this.state.userData.name}\n                  onChange={this.handleUserInput}\n                  readOnly\n                  name={'fullname'}\n                  className=\"form-control\"\n                  id=\"fullname\"\n                />\n                {this.errorClass(this.state.formErrors.fullname) && <span className=\"phoneright formErrors\">Read Only Field!</span>}\n              </div>\n            </div>\n            <div className=\"form-group row\">\n              <Label\n                htmlFor=\"email\"\n                title={'Email'}\n                className={'col-form-label col-sm-2'}\n              />\n              <div className=\"col-sm-10\">\n                <Input\n                  input_type={'text'}\n                  value={this.state.userData.emailId}\n                  onChange={this.handleUserInput}\n                  readOnly\n                  name={'email'}\n                  className=\"form-control\"\n                  id=\"email\"\n                />\n                {this.errorClass(this.state.formErrors.email) && <span className=\"phoneright formErrors\">Read Only Field!</span>}\n              </div>\n            </div>\n            <div className=\"form-group row\">\n              <Label\n                htmlFor=\"subject\"\n                title={'Subject'}\n                className={'col-form-label col-sm-2'}\n              />\n              <div className=\"col-sm-10\">\n                <Input\n                  input_type={'text'}\n                  value={this.state.subject}\n                  onChange={this.handleUserInput}\n                  readOnly\n                  name={'subject'}\n                  className=\"form-control\"\n                  id=\"subject\"\n                />\n              </div>\n            </div>\n            <div className=\"form-group row\">\n              <Label\n                htmlFor={'message'}\n                title={'Message'}\n                className={'col-sm-2 col-form-label'}\n              />\n              <div className=\"col-sm-10\">\n                <Textarea\n                  className=\"form-control\"\n                  rows=\"5\"\n                  onChange={this.handleUserInput}\n                  value={this.state.message}\n                  id=\"message\"\n                  name=\"message\"\n                  required\n                />\n              </div>\n            </div>\n            <div className=\"form-group\">\n              <div className=\"col-sm-9\">\n                <Button\n                  type={'submit'}\n                  className={'btn btn-primary button'}\n                  title={'Send Mail'}\n                  disabled={true}\n                />\n              </div>\n            </div>\n          </form>\n        </div>\n        <div className=\"panel-footer\">\n          <button onClick={this.mailForm} className=\"btn btn-sm btn-primary\" type=\"button\" data-toggle=\"tooltip\"\n            data-original-title=\"Send message to user\"><i className=\"glyphicon glyphicon-envelope\"></i></button>\n          <span className=\"pull-right\">\n            <button onClick={this.updateDetails} className=\"btn btn-sm btn-warning\" type=\"button\" data-toggle=\"tooltip\"\n              data-original-title=\"Edit this user\"><i className=\"glyphicon glyphicon-edit\"></i></button>\n            <button className=\"space btn btn-sm btn-danger\" type=\"button\" data-toggle=\"tooltip\"\n              data-original-title=\"Remove this user\"><i className=\"glyphicon glyphicon-remove\"></i></button>\n          </span>\n        </div>\n      </div >\n    )\n  }\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}